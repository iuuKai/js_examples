<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title></title>
	<script type="text/javascript">
		// 定义匿名函数
		var makeCounter = (function(n) {
			// 私有属性和函数【独立性】
			var num = n;
			function changeBy(val) {
				num += val;
			}

			// 公有函数
			return {	// 闭包
				add : function() {
					changeBy(1);
				},
				red : function() {
					changeBy(-1);
				},
				value : function() {
					return num;
				}
			}
		});

		// 执行操作
		function action(ele, btn1, btn2, obj) {
			btn1.onclick = function() {
				obj.add();
				ele.innerHTML = obj.value();
			}
			btn2.onclick = function() {
				obj.red();
				ele.innerHTML = obj.value();
			}
			ele.innerHTML = obj.value();
		}

		window.onload = function() {
			// 计数器 1
			var Counter1 = makeCounter(0);
			var add1 = document.getElementById('add1');
			var red1 = document.getElementById('red1');
			var demo1 = document.getElementById('demo1');
			action(demo1, add1, red1, Counter1);

			// 计数器 2
			var Counter2 = makeCounter(0);
			var add2 = document.getElementById('add2');
			var red2 = document.getElementById('red2');
			var demo2 = document.getElementById('demo2');
			action(demo2, add2, red2, Counter2);
		}
	</script>
</head>
<body>
	<h3>模块模式</h3>
	<hr />
	<p>计数器 1</p>
	<input type="button" id="add1" value="自增 (+1)" />
	<input type="button" id="red1" value="自减 (-1)" />
	<p id="demo1"></p>
	<hr />
	<p>计数器 2</p>
	<input type="button" id="add2" value="自增 (+1)" />
	<input type="button" id="red2" value="自减 (-1)" />
	<p id="demo2"></p>
</body>
</html>